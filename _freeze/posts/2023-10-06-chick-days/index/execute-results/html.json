{
  "hash": "baca8f3a7703cb3c1e7a0773107a869f",
  "result": {
    "markdown": "---\ntitle: \"Babies vs babies\"\nauthor: \"Andrew MacDonald\"\ndescription: |\n  Simulations of parasitized baby birds, with varying degrees of realism.\ndate: 06 Oct 2023\ndraft: true\neditor: source\ncategories: [UdeS, stan]\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(targets)\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(tidybayes)\n```\n:::\n\n\nCalculating GDDs but its baby birds getting eaten alive by maggots\n\n\n::: {.cell}\n\n```{.r .cell-code}\nois_list <- rerun(100, {\n  taille_couvee <- sample(3:8, 1)\n  pr_surv_ois <- 0.98\n  temps_nid <- sample(16:22, 1)\n  n_ois <- numeric(temps_nid)\n  n_ois[1] <- taille_couvee\n  for(t in 2:temps_nid){\n    n_ois[t] <- rbinom(1, n_ois[t-1], prob = pr_surv_ois)\n  }\n  n_ois\n})\n```\n:::\n\n\nassumption: nestling survival is independent of parasitism (its an hypothesis later) -- can exaggerate stresses.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nois_df <- ois_list |> \n  map_df(~ tibble(nois = ., jour = 1:length(.)), .id = \"nid_id\")\n\nois_df |> \n  ggplot(aes(x = jour, y = nois, group = nid_id)) + geom_line() + facet_wrap(~nid_id)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\nparasites\n\n\n::: {.cell}\n\n```{.r .cell-code}\nois_df |> filter(nid_id ==1) |> as.data.frame()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   nid_id nois jour\n1       1    7    1\n2       1    7    2\n3       1    6    3\n4       1    6    4\n5       1    6    5\n6       1    6    6\n7       1    6    7\n8       1    6    8\n9       1    6    9\n10      1    6   10\n11      1    6   11\n12      1    6   12\n13      1    6   13\n14      1    6   14\n15      1    6   15\n16      1    6   16\n17      1    6   17\n18      1    6   18\n19      1    6   19\n20      1    6   20\n```\n:::\n:::\n\n\n\nWhat is the relationship between number of chicks and prob of parasites??\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_ois <- 0:8\navg_logit <- -4\nslope_logit <- .3\nprob_parasite <- exp(avg_logit + slope_logit * x_ois)/(1 + exp(avg_logit + slope_logit*x_ois))\nplot(x_ois, prob_parasite, type = \"l\", ylim = c(0, 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nchance of getting a parasite every day\n\n\n::: {.cell}\n\n```{.r .cell-code}\nois_para_df <- ois_df |> \n  mutate(probab_para = exp(avg_logit + slope_logit*nois)/(1 + exp(avg_logit + slope_logit*nois)),\n         actual_para = rbinom(length(probab_para), 1, prob = probab_para)\n         )\n```\n:::\n\n\nassuming that parasitized nests can get MORE parasites\n\nparasites need to arrive like 4 days before fledging to survive and get counted\n\n\n::: {.cell}\n\n```{.r .cell-code}\nparasite_results <- ois_para_df |> \n  mutate(parasites_safe = (jour <= (max(jour) - 4)) & nois>0) |> \n  group_by(nid_id) |> \n  summarise(chick_avail = sum(nois),\n            para_pres = sum(actual_para * parasites_safe)>0)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nparasite_results |> \n  ggplot(aes(x = chick_avail, y = as.numeric(para_pres))) + geom_count()  + \n  stat_smooth(method = glm, method.args = list(family = \"binomial\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nnext steps, \n* make a shiny app?\nthings to change:\n\n* variation over the time over different ages -- older chicks die less, and are less attractive to parasites\n\nparticularly interesting is the relationship btween the attractiveness of chicks \nis ther ea way to make a logistic curve or another curve pounded by 0 and 1, that starts at 0 at a known amount? I think the modified logistic was kind of like that\n\nI need ot read more actualy papers, I'm getting inward looking and dumb\n\nlet me start with the papers of the scientists that I am wlorking with -- i'll read all of Matt's papers, and then all of the papers - or the most recent papers - of the scientists in McGill and  udes. \n\nBut this is only a part of the story.\nwe've shown that at least some of the increasting chick-days \n\nhm could you also use a type 2 predator response? something with a diminshing return for the number of eggs in a nest? I imagine that mahy of these insect species area actually tracking the number of indiviaul, to a total above 8, since they propbably also atack birds with bigger clutch sizes\n\nohh what about biomass,, are they flies atually attracted to THAT -- and what is the relationhsip between biomass and density in chicks? do chicks die as the nest gets crowded? probably not, but I nw that happens sometimes. \n\nin general, do people relate growth, onteogeny, self thinning to colonization rates? \n\nand how do we think about indicence when the area gets bigger, anyway? \n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}