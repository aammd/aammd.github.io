{
  "hash": "c1b092d07121adec744118b9b03f8a3f",
  "result": {
    "markdown": "---\ntitle: \"The Cholesky decomposition\"\nauthor: \"Andrew MacDonald\"\ndescription: |\n  It's giving correlations.\ndate: 11 Nov 2022\neditor: visual\ncategories: [UdeS, stan]\nexecute:\n  freeze: auto\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(targets)\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(tidybayes)\n```\n:::\n\n\n## code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(density(tan(runif(5000,min = 0, max = pi/2))*.3, from = 0), \n     xlim = c(0, 100))\n\ncurve(dexp(x, rate = 3), add = TRUE, col = \"red\", xlim = c(0, 100))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncurve(tan(x), xlim = c(-5,5))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-2.png){width=672}\n:::\n\n```{.r .cell-code}\nhist(-log(runif(200)), probability = TRUE)\ncurve(dexp(x), add = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-3.png){width=672}\n:::\n\n```{.r .cell-code}\neg <- rethinking::rlkjcorr(1, 2, 1)\ncc <- chol(eg)\n\npurrr::rerun(30,{\n  zz <- matrix(data = rnorm(500), ncol = 2)\n  # plot(zz)\n  rr <- t(cc) %*% t(zz)\n  # plot(t(rr))\n  cor(t(rr))[1,2]\n}) |> \n  purrr::flatten_dbl() |> density() |> plot()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `rerun()` was deprecated in purrr 1.0.0.\nℹ Please use `map()` instead.\n  # Previously\nrerun(30, {\nzz <- matrix(data = rnorm(500), ncol = 2)\nrr <- t(cc) %*% t(zz)\ncor(t(rr))[1, 2]\n})\n\n  # Now\nmap(1:30, ~ {\nzz <- matrix(data = rnorm(500), ncol = 2)\nrr <- t(cc) %*% t(zz)\ncor(t(rr))[1, 2]\n})\n```\n:::\n\n```{.r .cell-code}\nabline(v=eg[1,2])\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-4.png){width=672}\n:::\n\n```{.r .cell-code}\n#' modelling the plasticity slopes (xik - xbar) for each evironmental variable?\n#' what's correlated here? slopes and intercepts\n\neg <- rethinking::rlkjcorr(1, 2, 5)\ncc <- chol(eg)\n\nmm <- matrix(rnorm(4000, mean = 0, sd = 1), ncol = 2)\n\nplot(mm)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-5.png){width=672}\n:::\n\n```{.r .cell-code}\nyy <- t(t(cc) %*% t(mm))\n\nplot(yy)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-6.png){width=672}\n:::\n\n```{.r .cell-code}\ncor(yy)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n            [,1]        [,2]\n[1,] 1.000000000 0.007064849\n[2,] 0.007064849 1.000000000\n```\n:::\n\n```{.r .cell-code}\npurrr::rerun(50,{\n  zz <- matrix(data = rnorm(500), ncol = 2)\n  # plot(zz)\n  rr <- t(cc) %*% t(zz)\n  # plot(t(rr))\n  cor(t(rr))[1,2]\n}) |> \n  purrr::flatten_dbl() |> density() |> plot()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `rerun()` was deprecated in purrr 1.0.0.\nℹ Please use `map()` instead.\n  # Previously\nrerun(50, {\nzz <- matrix(data = rnorm(500), ncol = 2)\nrr <- t(cc) %*% t(zz)\ncor(t(rr))[1, 2]\n})\n\n  # Now\nmap(1:50, ~ {\nzz <- matrix(data = rnorm(500), ncol = 2)\nrr <- t(cc) %*% t(zz)\ncor(t(rr))[1, 2]\n})\n```\n:::\n\n```{.r .cell-code}\nabline(v=eg[1,2])\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-7.png){width=672}\n:::\n\n```{.r .cell-code}\np <- -.8\nL <- matrix(c(1,0, p, sqrt(1 - p^2)), ncol = 2, byrow = TRUE)\nzz <- matrix(data = rnorm(1000), ncol = 2)\nyy <- t(L %*% t(zz))\nplot(yy)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-8.png){width=672}\n:::\n\n```{.r .cell-code}\ncor(yy)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           [,1]       [,2]\n[1,]  1.0000000 -0.8175648\n[2,] -0.8175648  1.0000000\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}